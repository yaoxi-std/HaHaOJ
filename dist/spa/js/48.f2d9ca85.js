(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[48],{"9f17":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loaded?s("div",{staticClass:"row justify-center q-pa-md"},[s("q-card",{staticClass:"q-pa-md",staticStyle:{width:"1200px","margin-left":"50px"}},[s("problem-show",{attrs:{info:t.info}}),s("Code",{ref:"codeRef"}),s("div",[s("q-btn",{staticStyle:{width:"15rem"},attrs:{rounded:"",color:"green",label:"提 交",size:"lg",loading:t.running},on:{click:t.submit},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner-hourglass",{staticClass:"on-left"}),t._v("\n            "+t._s(t.runMessage)+"\n          ")]},proxy:!0}],null,!1,3596018226)})],1)],1),s("div",{staticClass:"q-ml-xl",staticStyle:{width:"300px"}},[s("q-card",{staticClass:"q-pa-sm text-black",staticStyle:{"font-size":"1rem"}},[s("q-item",[s("q-item-section",{staticClass:"col-3"},[t._v(" 来 源 ")]),s("q-item-section",{staticStyle:{color:"orange"}},[t._v(" "+t._s(this.info.source)+" ")])],1),s("q-item",[s("q-item-section",{staticClass:"col-3"},[t._v(" 通 过 ")]),s("q-item-section",{staticStyle:{color:"green"}},[t._v(" "+t._s(this.info.accepted_count)+" ")])],1),s("q-item",[s("q-item-section",{staticClass:"col-3"},[t._v(" 提 交 ")]),s("q-item-section",{staticStyle:{color:"red"}},[t._v(" "+t._s(this.info.all_count)+" ")])],1),t.info.tags.length>0?s("q-item",[s("q-item-section",{staticClass:"col-3"},[t._v("  标 签 ")]),t.info.tags.length>0?s("q-item-section",{staticClass:"q-mr-md"},[s("q-toggle",{attrs:{label:"显示"},model:{value:t.showTags,callback:function(e){t.showTags=e},expression:"showTags"}})],1):t._e()],1):t._e(),t.showTags?s("div",{staticClass:"q-px-sm q-gutter-sm q-mt-sm q-mb-md"},[t._l(t.info.tags,(function(e,i){return s("span",{key:i},[s("Tag",{staticStyle:{"font-size":"15px"},attrs:{color:e.color,size:"large"}},[t._v(" "+t._s(e.label)+" ")])],1)})),s("br")],2):t._e()],1),s("q-card",{staticClass:"q-pa-md text-black q-mt-lg",staticStyle:{"font-size":"1.2rem"}},[s("div",[s("router-link",{attrs:{to:{name:"discussProblem",params:{index:t.index},query:{title:t.info.title}}}},[t._v(" 相关讨论 "),s("Icon",{attrs:{type:"ios-chatbubbles",size:"24"}})],1),s("router-link",{staticStyle:{"margin-left":"50px"},attrs:{to:{name:"solutions",params:{index:t.index},query:{title:t.info.title}}}},[t._v(" 查看题解 "),s("Icon",{attrs:{type:"ios-paper",size:"24"}})],1)],1)]),s("q-card",{staticClass:"q-pa-sm text-black q-mt-lg",staticStyle:{"font-size":"1rem"}},[s("q-item",[s("q-item-section",[t._v(" 我的提交 ")])],1),t._l(t.history,(function(e,i){return i<4||t.showAllSub?s("div",{key:i,staticClass:"q-mt-sm q-ml-md"},[s("div",[t._v("\n              "+t._s(e.created_at)+"\n          ")]),s("div",[s("q-btn",{class:e.status,attrs:{flat:"",label:e.status,dense:"","no-caps":"",size:"16px"},on:{click:function(s){return t.showCode(e.id)}}})],1)]):t._e()})),t.history.length>4?s("q-toggle",{staticClass:"q-mb-md",attrs:{label:"展示全部"},model:{value:t.showAllSub,callback:function(e){t.showAllSub=e},expression:"showAllSub"}}):t._e()],2)],1)],1):t._e()},n=[],o=s("b688"),a=s("1cf6"),r={name:"problem",components:{problemShow:o["a"],Code:a["a"]},data:function(){return{loaded:!1,info:null,index:"",wants:["index","source","title","background_html","statement_html","input_html","output_html","examples_in","examples_out","hint_html","time_limit","memory_limit","accepted_count","all_count","tags"],running:!1,runMessage:"",history:[],showAllSub:!1,showTags:!1}},methods:{getProblem:function(){var t=this,e=new FormData;e.set("index",this.index),e.set("wants",JSON.stringify(this.wants)),this.$req.post("getProblemAsWants",e).then((function(e){void 0==e.errno&&(t.info=e.data,t.info.examples_in=JSON.parse(t.info.examples_in),t.info.examples_out=JSON.parse(t.info.examples_out),t.info.all_count=parseInt(t.info.all_count),t.info.accepted_count=parseInt(t.info.accepted_count),""==t.info.tags?t.info.tags=[]:t.info.tags=JSON.parse(t.info.tags),t.loaded=!0,t.getSubmissionHistory())}))},getSubmissionHistory:function(){var t=this;this.$req.get("getSubmissionHistory",{index:this.index}).then((function(e){void 0==e.errno&&(t.history=e.history,t.$refs.codeRef.code=e.code,t.$refs.codeRef.lang=e.lang)}))},setTimer:function(t){var e=this;this.timer=setInterval((function(){e.$req.get("getOneSubmissionBase",{id:t}).then((function(t){if(void 0==t.errno){if(t=t.data,"Queueing"!=t.status&&"Running"!=t.status){e.clearTimer(),e.running=!1,e.info.all_count+=1;var s="恭喜你,你的代码通过了此题!!!";"Accepted"!=t.status?s="很遗憾,你的代码没有通过此题":e.info.accepted_count+=1,e.$q.dialog({dark:!0,title:s}),e.history.unshift(t)}}else e.clearTimer(),e.running=!1}))}),1500)},clearTimer:function(){clearInterval(this.timer),this.timer=null},submit:function(){var t=this,e=this.$refs.codeRef.code;if(e.length<=10)this.$notify("error","代码太短");else{this.running=!0,this.runMessage="提交中...";var s=new FormData;s.set("code",e),s.set("lang",this.$refs.codeRef.lang),s.set("index",this.index),this.$req.post("submitCode",s).then((function(e){void 0==e.errno?setTimeout((function(){t.runMessage="测评中...",t.setTimer(e.id)}),1e3):t.running=!1}))}},showCode:function(t){var e=this.$router.resolve({name:"code",params:{id:t}});window.open(e.href,"_blank")}},computed:{contentStyle:function(){return{backgroundColor:"rgba(0,0,0,0.02)",color:"#555"}},contentActiveStyle:function(){return{backgroundColor:"#eee",color:"black"}},thumbStyle:function(){return{right:"2px",borderRadius:"5px",backgroundColor:"#027be3",width:"5px",opacity:.75}}},mounted:function(){this.index=this.$route.params.index,void 0==this.index?this.$router.push({name:"problemset"}):setTimeout(this.getProblem(),500)}},l=r,c=s("2877"),u=s("f09f"),m=s("9c40"),d=s("9149"),f=s("66e5"),h=s("4074"),g=s("9564"),p=s("eebe"),_=s.n(p),b=Object(c["a"])(l,i,n,!1,null,"03995f34",null);e["default"]=b.exports;_()(b,"components",{QCard:u["a"],QBtn:m["a"],QSpinnerHourglass:d["a"],QItem:f["a"],QItemSection:h["a"],QToggle:g["a"]})}}]);