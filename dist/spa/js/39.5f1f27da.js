(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{9898:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-ma-lg"},[n("div",{staticClass:"q-gutter-lg text-h6 text-black"},[n("q-radio",{attrs:{val:!0,label:"公开题库",color:"cyan"},model:{value:t.is_open,callback:function(e){t.is_open=e},expression:"is_open"}}),n("q-radio",{attrs:{val:!1,label:"私有题库",color:"orange",disable:0==(4&t.$store.state.user.privilege)},model:{value:t.is_open,callback:function(e){t.is_open=e},expression:"is_open"}})],1),n("div",{staticClass:"row q-mt-md q-ml-md"},[n("Page",{attrs:{total:t.total,"page-size":t.page_size,"show-total":"","show-elevator":"",current:t.current},on:{"update:current":function(e){t.current=e}}}),n("q-space"),(4&t.$store.state.user.privilege)>0?n("Button",{staticClass:"q-mr-md",attrs:{type:"info"},on:{click:function(e){return t.$router.push({name:"newProblem"})}}},[t._v(" 创建题目 ")]):t._e(),n("Button",{staticClass:"q-mr-md",attrs:{type:"warning"},on:{click:t.reverse}},[t._v(" 反序 ")])],1),n("Table",{staticClass:"q-mt-md",attrs:{border:"",columns:t.columns,data:t.data},scopedSlots:t._u([{key:"index",fn:function(e){var r=e.row;return[n("router-link",{attrs:{to:"#"}},[t._v(" "+t._s(r.index)+" ")])]}},{key:"title",fn:function(e){var r=e.row;return[n("router-link",{attrs:{to:"#"}},[t._v(" "+t._s(r.title)+" ")])]}},{key:"tags",fn:function(e){var r=e.row;return t._l(r.tags,(function(e,r){return n("Tag",{key:r,attrs:{color:e.color}},[t._v(" "+t._s(e.label)+" ")])}))}},{key:"action",fn:function(e){var r=e.index,o=e.row;return[(8&t.$store.state.user.privilege)>0?n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"problemInfo",params:{index:o.index}})}}},[t._v(" 修改 ")]):t._e(),(32&t.$store.state.user.privilege)>0?n("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(e){return t.del(o,r)}}},[t._v(" 删除 ")]):t._e(),(16&t.$store.state.user.privilege)>0?n("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(e){return t.copy(o.index)}}},[t._v(" 拷贝 ")]):t._e(),(8&t.$store.state.user.privilege)>0?n("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"info"},on:{click:function(e){return t.showTagModal(o)}}},[t._v(" 标签 ")]):t._e(),(64&t.$store.state.user.privilege)>0?n("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(e){return t.$router.push({name:"testdata",params:{index:o.index}})}}},[t._v(" 测试数据 ")]):t._e()]}}])}),n("Modal",{attrs:{width:"800px",title:"设置题目标签"},on:{"on-ok":t.updateTags},model:{value:t.tagsModal,callback:function(e){t.tagsModal=e},expression:"tagsModal"}},[n("Tags",{ref:"tags",attrs:{prop_tags:t.tags}})],1),n("br")],1)},o=[],a=(n("ac6a"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("06db"),n("3855"));function s(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var c={name:"index",components:{Tags:a["a"]},data:function(){return{columns:[{title:"Index",slot:"index",width:80},{title:"Title",slot:"title"},{title:"Author",key:"author"},{title:"Source",key:"source"},{title:"Tags",slot:"tags"},{title:"Action",slot:"action",width:450}],is_open:!0,data:[],page_size:50,total:0,current:1,inv_order:!0,wants:JSON.stringify(["index","title","author","source"]),tagsModal:!1,tags:[],tag_row:null}},watch:{is_open:function(){this.current=1,this.get_problems()}},methods:{showTagModal:function(t){this.tag_row=t,this.tags=t.tags,this.tagsModal=!0},updateTags:function(){var t=this,e=new FormData,n=this.$refs.tags.get_select_tags();e.set("tags",JSON.stringify(n)),e.set("index",this.tag_row.index),this.$req.post("updateProblemTags",e).then((function(e){void 0==e.errno&&(t.tag_row.tags=n,t.$notify("success","更新题目标签成功"))}))},del:function(t,e){var n=this;this.$q.dialog({dark:!0,title:"确认框",message:'你确定要删除 <strong style="font-size:18px;color:red">'+t.title+"</strong> 这道题",cancel:!0,persistent:!0,html:!0}).onOk((function(){n.$req.get("delProblem",{index:t.index}).then((function(t){void 0==t.errno&&(n.data.splice(e,1),n.$notify("success","删除成功"))}))}))},copy:function(t){var e=this,n="私有题库";"U"==t[0]&&(n="公共题库"),n=" 将会被拷贝到"+n+"中,你确定吗",this.$q.dialog({dark:!0,title:"确认框",message:'<strong style="font-size:18px;color:red">'+t+"</strong>"+n,cancel:!0,persistent:!0,html:!0}).onOk((function(){e.$req.get("copyProblem",{index:t}).then((function(t){void 0==t.errno&&e.$notify("success","拷贝成功")}))}))},reverse:function(){this.data=this.data.reverse(),this.inv_order=!this.inv_order},get_problems:function(){var t=this,e=this.page_size*(this.current-1)+1,n=e+this.page_size-1;this.$req.get("getProblems",{l:e,r:n,is_open:this.is_open}).then((function(e){if(void 0==e.errno){t.total=e.total,t.inv_order?t.data=e.data.reverse():t.data=e.data;var n,r=s(t.data);try{for(r.s();!(n=r.n()).done;){var o=n.value;""==o.tags?o.tags=[]:o.tags=JSON.parse(o.tags)}}catch(a){r.e(a)}finally{r.f()}}}))}},mounted:function(){this.get_problems()}},u=c,d=n("2877"),f=n("3786"),g=n("2c91"),p=n("eebe"),v=n.n(p),m=Object(d["a"])(u,r,o,!1,null,"c6b7aeb0",null);e["default"]=m.exports;v()(m,"components",{QRadio:f["a"],QSpace:g["a"]})}}]);