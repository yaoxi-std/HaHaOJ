(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{"52e7":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loaded?s("div",{staticClass:"q-pa-md",staticStyle:{"margin-left":"20px"}},[s("div",{staticClass:"text-h4 text-black"},[t._v("比赛:"),s("span",{staticStyle:{color:"#C10015"}},[t._v(t._s(this.id))])]),s("br"),s("div",{staticClass:"text-black"},[s("div",{staticClass:"text-h5 text-red"},[t._v("说明")]),t._m(0),t._l(t.num,(function(e){return s("div",{key:e,staticClass:"row text-h6 q-gutter-md"},[s("div",{staticClass:"q-gutter-md row"},[s("div",[s("strong",[s("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("题目标号:"+t._s(t.labels[e-1]))])]),s("div",[s("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"Like U1000"},on:{"on-blur":function(s){return t.searchProbelmTitle(e-1)}},model:{value:t.problems[e-1],callback:function(s){t.$set(t.problems,e-1,s)},expression:"problems[cnt-1]"}})],1),s("div",[0==t.err[e-1]?s("div",{staticStyle:{color:"red"}},[t._v(" 请输入题号 ")]):1==t.err[e-1]?s("div",{staticStyle:{color:"red"}},[t._v(" 找不到该题 ")]):s("div",{staticStyle:{color:"green"}},[t._v(" "+t._s(t.titles[e-1])+" ")])]),(512&t.$store.state.user.privilege)>0?s("div",[s("Button",{attrs:{type:"error"},on:{click:function(s){return t.removeProblem(e-1)}}},[t._v(" 移除 ")])],1):t._e()]),s("br")])})),(512&t.$store.state.user.privilege)>0?s("div",{staticClass:"row q-mt-lg"},[s("Button",{attrs:{type:"success"},on:{click:t.addProblem}},[t._v(" 添加题目 ")]),s("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"error"},on:{click:t.removeAllProblem}},[t._v(" 移除全部 ")])],1):t._e(),(512&t.$store.state.user.privilege)>0?s("Button",{staticClass:"q-mt-lg",attrs:{type:"primary",size:"large"},on:{click:t.submit}},[t._v(" 提交 ")]):t._e()],2)]):t._e()},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-h6 q-gutter-sm q-mt-md q-mb-md"},[s("div",[t._v("1. 比赛题目数量不能超过26 ")]),s("div",[t._v("2. 题目会自动生成连续标号,移除时也会自动跳整标号. 操作完之后提交方能生效")]),s("div",[t._v("3. 建议不要用公共题库的题目")])])}],l={data:function(){return{id:0,problems:[],labels:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],titles:[],err:[],num:0,loaded:!1}},methods:{addProblem:function(){this.num>=26?alert("题目数量超出限制"):(this.problems.push(""),this.titles.push(""),this.err.push(0),this.num++)},removeProblem:function(t){0!=this.num?(this.problems.splice(t,1),this.titles.splice(t,1),this.err.splice(t,1),this.num--):this.$message("error","题目为空，无法移除")},removeAllProblem:function(){this.num=0,this.problems=[],this.titles=[],this.err=[]},searchProbelmTitle:function(t){var e=this;0!=(512&this.$store.state.user.privilege)&&(this.problems[t]=this.problems[t].trim(),""!=this.problems[t]?this.$req.get("searchProbelmTitle",{index:this.problems[t]}).then((function(s){s.exist?(console.log(s.title),e.$set(e.titles,t,s.title),e.$set(e.err,t,2)):(e.$set(e.titles,t,""),e.$set(e.err,t,1))})):this.$set(this.err,t,0))},validate:function(){for(var t=0;t<this.num;t++)if(0==this.err[t]||1==this.err[t])return"请修正题目错误";return""},submit:function(){var t=this,e=this.validate();if(e)alert(e);else{var s=new FormData;s.append("id",this.id),s.append("problems",JSON.stringify(this.problems)),s.append("labels",JSON.stringify(this.labels.slice(0,this.num))),this.$req.post("addCproblems",s).then((function(e){void 0==e.errno&&t.$notify("success","提交成功")}))}}},mounted:function(){var t=this;this.$route.params.id?(this.id=this.$route.params.id,this.$req.get("getCproblems",{id:this.id}).then((function(e){if(void 0==e.errno){if(t.num=e.num,t.num){t.problems=e.problems,t.titles=e.titles;for(var s=0;s<t.num;s++)t.err.push(2)}t.loaded=!0}}))):this.$router.push({name:"contestManage"})}},o=l,n=s("2877"),a=Object(n["a"])(o,i,r,!1,null,null,null);e["default"]=a.exports}}]);