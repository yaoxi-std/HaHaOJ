(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{"6d70":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loaded?a("div",{staticClass:"q-ma-lg"},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"text-primary text-h4"},[t._v(t._s(t.index)+" "),a("span",{staticStyle:{color:"#C10015"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"text-h5 text-black q-mt-lg"},[t._v("说明")]),a("div",{staticClass:"text-black text-h6 q-gutter-md q-mt-md"},[t._m(0),a("div",[t._v("2.多次导入,前面导入的文件会被删除")]),a("div",[t._v("3.输入输出可以文件名应该匹配,否则无法失败; 合法的输入文件后缀是.in，输出文件的后缀是.ans或者.out;输入输出文件名应该匹配,比如(1.in,1.out)、(data01.in.data01.ans)等, 提交到后台进行处理并重命名为测试号加后缀的文件格式")]),a("q-separator")],1),(128&t.$store.state.user.privilege)>0?a("div",{staticClass:"q-gutter-md q-mt-md"},[a("Upload",{staticClass:"q-mt-md",staticStyle:{width:"200px"},attrs:{"before-upload":t.before_upload,type:"drag",action:"//jsonplaceholder.typicode.com/posts/"}},[a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),a("p",[t._v("选择文件")])],1)]),t.choose_file?a("div",{staticClass:"text-black"},[t._v("\n        "+t._s(t.choose_file.name)+"\n        "),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success"},on:{click:t.submit}},[t._v(" 上传 ")]),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"error"},on:{click:t.remove_file}},[t._v(" 移除 ")])],1):t._e(),a("q-separator",{staticClass:"q-mt-md"})],1):t._e(),t.data.length?a("div",{staticClass:"q-mt-md"},[t._m(1),a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.download}},[t._v(" 下载数据 ")]),(8&t.$store.state.user.privilege)>0?a("Button",{staticClass:"q-mr-md",staticStyle:{float:"right"},attrs:{type:"error"},on:{click:t.delTestdatas}},[t._v(" 删除数据 ")]):t._e(),a("div",{staticStyle:{clear:"both","margin-top":"10px"}}),a("Table",{staticClass:"q-mt-md",attrs:{border:"",columns:t.columns,data:t.data},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.row;e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small",loading:t.loading},on:{click:function(e){return t.showTestdata(o)}}},[t._v("查看")])]}}],null,!1,2530681723)})],1):t._e(),a("Modal",{staticStyle:{width:"800px"},attrs:{"mask-closable":!1,draggable:"",scrollable:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("p",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.modal_input_name)+" ")]),a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},readonly:""},model:{value:t.modal_input,callback:function(e){t.modal_input=e},expression:"modal_input"}}),a("div",{staticClass:"q-mt-md"}),a("p",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.modal_output_name)+" ")]),a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},readonly:""},model:{value:t.modal_output,callback:function(e){t.modal_output=e},expression:"modal_output"}})],1)],1)]):t._e()},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("1.仅支持"),a("span",{staticStyle:{color:"red"}},[t._v("zip压缩包")]),t._v("文件")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticStyle:{"font-size":"20px",color:"black"}},[a("strong",[t._v("全部测试数据如下")])])}],n=a("c47a"),s=a.n(n),l=(a("7f7f"),{name:"testdata",data:function(){return{index:"",title:"",loaded:!1,data:[],choose_file:null,loading:!1,columns:[{title:"测试点",key:"case_id"},{title:"输入文件",key:"input_name"},{title:"输入文件大小",key:"input_size"},{title:"输出文件",key:"output_name"},{title:"输出文件大小",key:"output_size"},{title:"操作",slot:"action"}],modal:!1,modal_input_name:"",modal_input:"",modal_output_name:"",modal_output:""}},methods:{is_zip:function(){var t=this.choose_file.name;t.length;return"zip"==t.substr(t.length-3,3)},before_upload:function(t){return this.choose_file=t,!1},remove_file:function(){this.choose_file=null},downFile:function(t,e){if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(t,e);else{var a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download=e,a.click(),window.URL.revokeObjectURL(a.href)}},download:function(){var t="downloadDatas",e=new XMLHttpRequest;e.open("post",t,!0),e.responseType="blob",e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=e.getResponseHeader("Content-disposition"),a=t.substring(20,t.length),o=new Blob([e.response]),i=document.createElement("a"),n=URL.createObjectURL(o);i.style.display="none",i.href=n,i.download=a,document.body.appendChild(i),i.click()}else 4==e.readyState&&200!=e.status&&this.$notify("error","请求失败")},e.send("index="+this.index)},getTestdatas:function(){var t=this;this.$req.get("getTestdatas",{index:this.index}).then((function(e){void 0==e.errno&&(t.data=e.data)})),this.loaded=!0},delTestdatas:function(){var t=this;this.$q.dialog(s()({dark:!0,title:"提醒",message:"你确定要删除全部测试数据吗?",cancel:!0,ok:"确认"},"cancel","取消")).onOk((function(){t.$req.get("removeTestdatas",{index:t.index}).then((function(e){void 0==e.errno&&(t.data=[])}))})).onCancel((function(){}))},showTestdata:function(t){var e=this;this.$req.get("showOneTestdata",{index:this.index,case_id:t.case_id}).then((function(a){void 0==a.errno&&(e.modal_input_name=t.input_name,e.modal_output_name=t.output_name,e.modal_input=a.input,e.modal_output=a.output,e.modal=!0)}))},submit:function(){var t=this;if(this.is_zip()){var e=new FormData;e.set("index",this.index),e.set("zip",this.choose_file),this.$req.post("uploadTestdatas",e).then((function(e){void 0==e.errno&&(t.getTestdatas(),t.remove_file(),t.$notify("success","上传成功"))}))}else this.$notify("error","只能上传zip压缩包")}},mounted:function(){var t=this;this.index=this.$route.params.index,void 0==this.index&&(this.$notify("error","错误的题号"),this.$router.push({name:"admin"}));var e=new FormData;e.set("index",this.index),e.set("json",JSON.stringify(["title"])),this.$req.post("getOneProblemInfoByJson",e).then((function(e){void 0==e.errno?(t.title=e.data.title,t.getTestdatas()):t.$router.push({name:"admin"})}))}}),d=l,r=a("2877"),c=a("eb85"),u=a("eebe"),m=a.n(u),p=Object(r["a"])(d,o,i,!1,null,"263ef9a6",null);e["default"]=p.exports;m()(p,"components",{QSeparator:c["a"]})}}]);