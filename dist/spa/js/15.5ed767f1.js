(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"0760":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-ma-md"},[s("div",{staticClass:"q-mt-md q-gutter-md"},[s("div",{staticClass:"desc"},[t._v(" 版权信息 ")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2 item"},[t._v(" 作者 ")]),s("Input",{staticStyle:{width:"300px"},model:{value:t.problem.author,callback:function(e){t.$set(t.problem,"author",e)},expression:"problem.author"}})],1),s("q-separator"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2 item"},[t._v(" 来源 ")]),s("Input",{staticStyle:{width:"300px"},model:{value:t.problem.source,callback:function(e){t.$set(t.problem,"source",e)},expression:"problem.source"}})],1),s("q-separator")],1),s("div",{staticClass:"desc q-mt-md"},[t._v(" 是否公开 ")]),s("div",{staticClass:"text-black q-gutter-md q-mt-sm ",staticStyle:{"font-size":"18px","margin-left":"0px"}},[s("q-radio",{attrs:{val:!1,label:"隐藏",color:"orange",dense:""},model:{value:t.problem.is_open,callback:function(e){t.$set(t.problem,"is_open",e)},expression:"problem.is_open"}}),s("q-radio",{attrs:{val:!0,label:"公开",color:"cyan",dense:""},model:{value:t.problem.is_open,callback:function(e){t.$set(t.problem,"is_open",e)},expression:"problem.is_open"}}),s("q-separator")],1),s("div",{staticClass:"q-mt-md q-gutter-md"},[s("div",{staticClass:"desc"},[t._v(" 题目信息 ")]),s("div",{staticClass:"text-black q-gutter-md",staticStyle:{"font-size":"18px"}},[s("q-radio",{attrs:{val:!1,label:"正常题",color:"orange",dense:""},model:{value:t.problem.is_spj,callback:function(e){t.$set(t.problem,"is_spj",e)},expression:"problem.is_spj"}}),s("q-radio",{attrs:{val:!0,label:"特判题",color:"cyan",dense:""},model:{value:t.problem.is_spj,callback:function(e){t.$set(t.problem,"is_spj",e)},expression:"problem.is_spj"}})],1),t.problem.is_spj?s("div",[s("div",{staticClass:"row"},[s("Upload",{staticClass:"col-2",attrs:{action:"#","before-upload":t.before_upload,type:"drag"}},[s("Button",{staticStyle:{float:"left"},attrs:{icon:"ios-cloud-upload-outline",type:"success",size:"large",long:""}},[t._v("上传(spj.c, spj.cpp, spj.py)")])],1)],1),t.spj_file?s("div",[t._v("\n        "+t._s(t.spj_file.name)+"\n        "),s("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"error"},on:{click:function(e){t.spj_file=null}}},[t._v(" 移除 ")])],1):t._e()]):t._e(),s("q-separator"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2 item"},[t._v(" 题目 ")]),s("Input",{staticStyle:{width:"300px"},model:{value:t.problem.title,callback:function(e){t.$set(t.problem,"title",e)},expression:"problem.title"}})],1),s("q-separator"),s("div",{staticClass:"row"},[t._m(0),s("InputNumber",{staticStyle:{width:"150px"},attrs:{max:4e4},model:{value:t.problem.time_limit,callback:function(e){t.$set(t.problem,"time_limit",e)},expression:"problem.time_limit"}})],1),s("q-separator"),s("div",{staticClass:"row"},[t._m(1),s("InputNumber",{staticStyle:{width:"150px"},attrs:{max:2048},model:{value:t.problem.memory_limit,callback:function(e){t.$set(t.problem,"memory_limit",e)},expression:"problem.memory_limit"}})],1),s("q-separator"),s("div",{staticClass:"row"},[t._m(2),s("mavon-editor",{ref:"bg",staticClass:"col-10",model:{value:t.problem.background,callback:function(e){t.$set(t.problem,"background",e)},expression:"problem.background"}})],1),s("q-separator"),s("div",{staticClass:"row"},[t._m(3),s("mavon-editor",{ref:"st",staticClass:"col-10",model:{value:t.problem.statement,callback:function(e){t.$set(t.problem,"statement",e)},expression:"problem.statement"}})],1),s("q-separator"),s("div",{staticClass:"row"},[t._m(4),s("mavon-editor",{ref:"input",staticClass:"col-10",model:{value:t.problem.input,callback:function(e){t.$set(t.problem,"input",e)},expression:"problem.input"}})],1),s("q-separator"),s("div",{staticClass:"row"},[t._m(5),s("mavon-editor",{ref:"output",staticClass:"col-10",model:{value:t.problem.output,callback:function(e){t.$set(t.problem,"output",e)},expression:"problem.output"}})],1),s("q-separator"),s("div",{staticClass:"row"},[t._m(6),s("mavon-editor",{ref:"hint",staticClass:"col-10",model:{value:t.problem.hint,callback:function(e){t.$set(t.problem,"hint",e)},expression:"problem.hint"}})],1),s("q-separator")],1),s("div",{staticClass:"q-mt-md q-gutter-md"},[s("div",{staticClass:"desc"},[t._v(" 输入输出样例 ")]),t._l(t.examples_in,(function(e,i){return s("div",{key:i,staticClass:"q-mt-md row text-black"},[s("div",{staticClass:"col-5"},[s("div",[t._v("输入样例"+t._s(i+1))]),s("div",[s("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:4,placeholder:"Enter something..."},model:{value:t.examples_in[i],callback:function(e){t.$set(t.examples_in,i,e)},expression:"examples_in[idx]"}})],1)]),s("div",{staticClass:"col-5"},[s("div",[t._v("输出样例"+t._s(i+1))]),s("div",[s("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:4,placeholder:"Enter something..."},model:{value:t.examples_out[i],callback:function(e){t.$set(t.examples_out,i,e)},expression:"examples_out[idx]"}})],1)])])})),s("div",[s("Button",{attrs:{size:"large",type:"success"},on:{click:t.addExample}},[t._v(" 增加样例 ")]),s("Button",{staticClass:"q-ml-md",attrs:{size:"large",type:"error"},on:{click:t.removeExample}},[t._v(" 减少样例 ")])],1)],2),s("q-separator",{staticClass:"q-mt-md"}),s("Button",{staticClass:"q-mt-md",attrs:{type:"primary",size:"large"},on:{click:t.submit}},[t._v(" 提交 ")])],1)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2 item"},[s("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("时间限制(MS) ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2 item"},[s("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("空间限制(MB) ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2"},[s("div",{staticClass:"item"},[t._v("背景说明")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2"},[s("div",{staticClass:"item"},[t._v("题面说明")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2"},[s("div",{staticClass:"item"},[t._v("输入说明")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2"},[s("div",{staticClass:"item"},[t._v("输出说明")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2"},[s("div",{staticClass:"item"},[t._v("提示")])])}],a=(s("7f7f"),{name:"newProblem",data:function(){return{problem:{author:this.$store.state.user.username,source:"Happy Online Judge",title:"",is_open:!1,is_spj:!1,spj_type:"",time_limit:1e3,memory_limit:128,background:"",statement:"",input:"",output:"",hint:"",background_html:"",statement_html:"",input_html:"",output_html:"",hint_html:"",examples_in:"",examples_out:""},spj_file:null,examples_in:[],examples_out:[]}},methods:{before_upload:function(t){return this.spj_file=t,!1},addExample:function(){this.examples_in.push(""),this.examples_out.push("")},removeExample:function(){this.examples_in.length>0&&(this.examples_in.pop(),this.examples_out.pop())},validate:function(){if(this.problem.time_limit<200)return"时间限制不能低于200MS";if(this.problem.memory_limit<20)return"空间限制不能低于20MB";if(this.problem.is_spj){if(null==this.spj_file&&""==this.problem.spj_type)return"特判文件不能为空";if(this.spj_file){var t=this.spj_file.name;if("spj.c"==t)this.problem.spj_type="C";else if("spj.cpp"==t)this.problem.spj_type="C++";else{if("spj.py"!=t)return"特判文件名或类型不对";this.problem.spj_type="Python3"}}}return""},submit:function(){var t=this,e=this.validate();if(""==e){this.problem.background_html=this.$refs.bg.d_render,this.problem.statement_html=this.$refs.st.d_render,this.problem.input_html=this.$refs.input.d_render,this.problem.output_html=this.$refs.output.d_render,this.problem.hint_html=this.$refs.hint.d_render,this.problem.examples_in=JSON.stringify(this.examples_in),this.problem.examples_out=JSON.stringify(this.examples_out);var s=new FormData;s.set("problem",JSON.stringify(this.problem)),this.spj_file&&s.set("spj_file",this.spj_file),this.$req.post("newProblem",s).then((function(e){void 0==e.errno&&(t.$notify("success","新建成功"),t.$router.push({name:"problemInfo",params:{index:e.index}}))}))}else this.$notify("error",e)}}}),o=a,r=(s("b527"),s("2877")),n=s("eb85"),p=s("3786"),m=s("eebe"),c=s.n(m),u=Object(r["a"])(o,i,l,!1,null,"3bb50c70",null);e["default"]=u.exports;c()(u,"components",{QSeparator:n["a"],QRadio:p["a"]})},"51f3":function(t,e,s){},b527:function(t,e,s){"use strict";var i=s("51f3"),l=s.n(i);l.a}}]);